const form = document.getElementById('form');
const nameInput = document.getElementById('name');
const cpfInput = document.getElementById('cpf');
const phoneInput = document.getElementById('phone');
const emailInput = document.getElementById('email');
const passwordInput = document.getElementById('password');

let people = JSON.parse(localStorage.getItem('people')) || [];

function isPasswordValid(password) {
  return /^(?=.*[A-Za-z]).{8,}$/.test(password);
}

function isValidCPF(cpf) {
  // Verifica se o CPF tem 11 dígitos
  if (cpf.length !== 11) {
    return false;
  }

  // Outras verificações específicas de CPF
  // Aqui você pode implementar a validação de CPF conforme suas necessidades

  return true;
}

function isValidEmail(email) {
  // Expressão regular para validar um endereço de email
  const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
  return emailRegex.test(email);
}

function addPerson(name, cpf, phone, email, password) {
  const person = { name, cpf, phone, email, password };
  people.push(person);
}

function doesNameExist(name) {
  return people.some(person => person.name === name);
}

function doesCPFExist(cpf) {
  return people.some(person => person.cpf === cpf);
}

function displayMessageAndReset(message) {
  console.log(message);
  form.reset();
}

form.addEventListener('submit', function (event) {
  event.preventDefault();

  const name = nameInput.value;
  const cpf = cpfInput.value;
  const phone = phoneInput.value;
  const email = emailInput.value;
  const password = passwordInput.value;

  if (!isPasswordValid(password)) {
    displayMessageAndReset('A senha deve ter pelo menos 8 caracteres e conter pelo menos uma letra.');
    return;
  }

  if (doesNameExist(name)) {
    displayMessageAndReset('Este nome já existe na lista!');
    return;
  }

  if (!isValidCPF(cpf)) {
    displayMessageAndReset('CPF inválido ou em formato incorreto.');
    return;
  }

  if (doesCPFExist(cpf)) {
    displayMessageAndReset('Este CPF já está cadastrado!');
    return;
  }

  if (!isValidEmail(email)) {
    displayMessageAndReset('Por favor, insira um endereço de email válido.');
    return;
  }

  addPerson(name, cpf, phone, email, password);

  localStorage.setItem('people', JSON.stringify(people));

  displayMessageAndReset('Dados do formulário armazenados no localStorage:');
});

